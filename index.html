<body></body>
<script src="https://unpkg.com/tone"></script>
<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js?v=1"></script>
<script>
/* global nn, Tone */
  
Tone.Transport.bpm.value = 120
let step = 0
let notes = [
  'C4', 'E4', 'G4', // C major (4th octave)
  'C5', 'E5', 'G5' // C major (5th octave)
]

const reverb = new Tone.Reverb({
  wet: 0.75,
  decay: 5
}).toDestination()


const piano = new Tone.Sampler({
    baseUrl: "https://tonejs.github.io/audio/salamander/",
    urls: {
      'A0': 'A0.mp3',
      'C1': 'C1.mp3',
      'D#1': 'Ds1.mp3',
      'F#1': 'Fs1.mp3',
      'A1': 'A1.mp3',
      'C2': 'C2.mp3',
      'D#2': 'Ds2.mp3',
      'F#2': 'Fs2.mp3',
      'A2': 'A2.mp3',
      'C3': 'C3.mp3',
      'D#3': 'Ds3.mp3',
      'F#3': 'Fs3.mp3',
      'A3': 'A3.mp3',
      'C4': 'C4.mp3',
      'D#4': 'Ds4.mp3',
      'F#4': 'Fs4.mp3',
      'A4': 'A4.mp3',
      'C5': 'C5.mp3',
      'D#5': 'Ds5.mp3',
      'F#5': 'Fs5.mp3',
      'A5': 'A5.mp3',
      'C6': 'C6.mp3',
      'D#6': 'Ds6.mp3',
      'F#6': 'Fs6.mp3',
      'A6': 'A6.mp3',
      'C7': 'C7.mp3',
      'D#7': 'Ds7.mp3',
      'F#7': 'Fs7.mp3',
      'A7': 'A7.mp3',
      'C8': 'C8.mp3'
    },
    release: 1
})

piano.toDestination()
piano.connect(reverb)
// FUNCTIONS .......................................................
function play () {
piano.triggerAttackRelease(['C4', 'E4', 'G4'], '8n')
}

function toggle () {
if (Tone.Transport.state === 'started') {
  Tone.Transport.stop()
  toggleButton.content('cold-play')
} else {
  Tone.Transport.start()
  toggleButton.content('cold-stop')
}
}
function play (time) {
  const i = step % notes.length
  const note = notes[i]
  piano.triggerAttackRelease(note, '8n', time)
  step++ // increase step counter by 1
}

// timing events ...................................................
new Tone.Loop(play, '8n').start()
  
// UI ELEMENTS .....................................................

const buttonCSS = {
  border: '1px solid black',
  padding: '20px 30px',
  background: 'transparent',
  margin: '10px',
  cursor: 'pointer'
}

function buttonHover (e) {
  const button = e.target
  const over = e.type === 'mouseover'
  button.style.background = over ? 'black' : 'transparent'
  button.style.color = over ? 'white' : 'black'
}
  
const container = nn.create('section')
  .addTo('body')
  .css({
    display: 'flex',
    justifyContent: 'center',
    alignItems: 'center',
    position: 'fixed',
    width: '100vw',
    height: '100vh'
  })

nn.create('button')
  .content('cold-play')
  .addTo(container)
  .css(buttonCSS)
  .on('mouseover', buttonHover)
  .on('mouseout', buttonHover)
  .on('click', toggle)
  
nn.create('button')
  .content('randomize')
  .addTo(container)
  .css(buttonCSS)
  .on('mouseover', buttonHover)
  .on('mouseout', buttonHover)
  

</script>